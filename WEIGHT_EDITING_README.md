# Функциональность редактирования веса блюд

## Описание
Добавлена возможность редактирования веса блюда после автоматического распознавания для корректировки неточных данных и пересчета КБЖУ в реальном времени.

## Как это работает

### 1. Отображение веса
- Вес блюда отображается в отдельном элементе с возможностью редактирования
- Вес выделен оранжевым цветом и имеет курсор-указатель
- Рядом с весом есть кнопка редактирования с иконкой карандаша

### 2. Редактирование веса
- **Клик по весу** или **кнопка редактирования** активирует режим редактирования
- Появляется поле ввода с текущим значением веса
- Поле ввода автоматически получает фокус и выделяет текст

### 3. Подтверждение изменений
- **Enter** - сохраняет новый вес и пересчитывает КБЖУ
- **Escape** - отменяет изменения и возвращает исходный вес
- **Потеря фокуса** - автоматически сохраняет изменения

### 4. Пересчет КБЖУ
- При изменении веса автоматически пересчитываются все значения:
  - Калории
  - Белки (г)
  - Жиры (г)
  - Углеводы (г)
- Пересчет происходит пропорционально изменению веса
- Обновление отображается с плавной анимацией

## Техническая реализация

### HTML структура
```html
<p id="food-portion">
    <span class="portion-text">Порция: </span>
    <span class="weight-value" id="weight-value">-</span>
    <span class="weight-unit">г</span>
    <button class="edit-weight-btn" id="edit-weight-btn" title="Изменить вес">
        <!-- Иконка карандаша -->
    </button>
</p>
```

### CSS классы
- `.weight-value` - основной элемент веса
- `.weight-value:hover` - эффект при наведении
- `.weight-value.editing` - стиль в режиме редактирования
- `.edit-weight-btn` - кнопка редактирования
- `.weight-input` - поле ввода веса

### JavaScript функции
- `extractWeightFromPortion(portion)` - извлекает вес из строки порции
- `startWeightEdit()` - начинает редактирование веса
- `finishWeightEdit(newWeight)` - завершает редактирование
- `cancelWeightEdit()` - отменяет изменения
- `recalculateNutrition(newWeight)` - пересчитывает КБЖУ

## Примеры использования

### Сценарий 1: Корректировка неточного веса
1. Пользователь фотографирует блюдо
2. Система распознает "Цезарь с курицей, 320г"
3. Пользователь кликает по весу "320"
4. Вводит корректный вес "280"
5. Нажимает Enter
6. КБЖУ автоматически пересчитывается для 280г

### Сценарий 2: Изменение размера порции
1. Пользователь хочет съесть половину порции
2. Кликает по весу и вводит "160" (половина от 320г)
3. Все значения КБЖУ пропорционально уменьшаются

## Преимущества
- ✅ Точность данных о питании
- ✅ Гибкость в указании размера порции
- ✅ Мгновенный пересчет КБЖУ
- ✅ Интуитивный интерфейс
- ✅ Поддержка клавиатуры (Enter/Escape)

## Ограничения
- Вес ограничен диапазоном 1-10000 грамм
- Пересчет происходит только для текущего блюда
- Изменения не сохраняются до нажатия "Сохранить в дневник"
